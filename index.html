<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Dynamic Image Loader">
  <meta property="og:description" content="Generate images dynamically based on URL parameters.">
  <meta property="og:url" content="https://catbuttons.github.io"> <!-- Change to your URL -->
  <meta property="og:image" content="" id="og-image">
  <meta property="og:type" content="website">
  <title>Dynamic Image Generator</title>
  <script>
    // Function to parse the URL parameters using only '?'
    function getParams() {
      const query = window.location.search.slice(1); // Remove the leading '?'
      const params = {};
      const pairs = query.split('?');
      pairs.forEach(pair => {
        const [key, value] = pair.split('=');
        if (key && value) {
          params[key] = decodeURIComponent(value);
        }
      });
      return params;
    }

    // Function to generate an image using the Canvas API
    function generateImage() {
      const params = getParams();
      const color = params.color || 'blue'; // Default color
      const button = params.button || 'button'; // Default button name

      // Create a canvas element to draw the image
      const canvas = document.createElement('canvas');
      canvas.width = 200;
      canvas.height = 100;

      const ctx = canvas.getContext('2d');

      // Draw the background color
      ctx.fillStyle = color;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Draw the button text
      ctx.fillStyle = 'white';
      ctx.font = '20px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(button, canvas.width / 2, canvas.height / 2);

      // Convert the canvas to an image and set it as the source
      const dataUrl = canvas.toDataURL(); // Get base64 image data

      // Set the image source to the generated data URL
      const image = new Image();
      image.src = dataUrl;
      document.body.appendChild(image); // Append image to body

      // Update the Open Graph image tag to point to the generated image
      const ogImage = document.getElementById("og-image");
      ogImage.content = dataUrl; // Set Open Graph image meta tag to the generated image URL
    }

    document.addEventListener("DOMContentLoaded", () => {
      generateImage(); // Generate the image when the page is loaded
    });
  </script>
</head>
<body style="margin: 0; overflow: hidden;">
  <h1>Generated Image</h1>
</body>
</html>
