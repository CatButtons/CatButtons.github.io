<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Image and HTML Loader</title>
  <script>
    // Helper function to parse URL parameters (handles multiple ?)
    function getParams() {
      const params = {};
      const queryString = window.location.search.substring(1);
      const pairs = queryString.split('?');
      
      pairs.forEach((pair) => {
        const [key, value] = pair.split('=');
        if (key && value) {
          params[key] = decodeURIComponent(value);
        }
      });
      return params;
    }

    // Function to load the HTML content or show an image based on the params
    document.addEventListener("DOMContentLoaded", () => {
      const params = getParams();
      const htmlFile = params.html;
      const color = params.color || "red"; // Default to "red" if no color param
      const button = params.button || "cool"; // Default to "cool" button
      const imagePath = `${color}-${button}.png`; // Dynamic image path
      
      // Check if "html" parameter exists to load an HTML file
      if (htmlFile) {
        const htmlPath = `./${htmlFile}.html`;
        console.log(`Loading HTML content from: ${htmlPath}`);

        // Fetch and append the HTML content dynamically
        fetch(htmlPath)
          .then((response) => response.text())
          .then((htmlContent) => {
            const container = document.createElement("div");
            container.innerHTML = htmlContent;
            document.body.appendChild(container);
          })
          .catch((error) => {
            const errorDiv = document.createElement("div");
            errorDiv.style.color = "red";
            errorDiv.textContent = `Error loading HTML: ${htmlFile}.html`;
            document.body.appendChild(errorDiv);
          });
      } else {
        // If no "html" param, show the image with the dynamic filename
        const imageContainer = document.createElement("div");
        imageContainer.style.textAlign = "center"; // Center the image
        const imageElement = document.createElement("img");
        imageElement.src = `https://catbuttons.github.io/${imagePath}`; // Image path
        imageElement.alt = `${color}-${button}.png`;
        imageElement.style.maxWidth = "100%";
        imageElement.style.marginTop = "50px";
        imageContainer.appendChild(imageElement);
        document.body.appendChild(imageContainer);
      }
    });
  </script>
</head>
<body style="margin: 0; height: 100%; background-color: rgb(14, 14, 14);">
  <h1 style="text-align: center; color: white;">Dynamic Content and Image Loader</h1>
</body>
</html>
